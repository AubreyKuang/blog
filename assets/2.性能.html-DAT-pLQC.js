import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-CA3Si4S1.js";const l={};function t(h,i){return n(),a("div",null,i[0]||(i[0]=[e(`<h1 id="æ€§èƒ½åˆ†æ" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½åˆ†æ"><span>æ€§èƒ½åˆ†æ</span></a></h1><p>ä¸»è¦æ˜¯ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼ˆä¸»è¦æ˜¯ç´¢å¼•çš„ä¼˜åŒ–ï¼‰</p><h4 id="sqlæ‰§è¡Œé¢‘ç‡" tabindex="-1"><a class="header-anchor" href="#sqlæ‰§è¡Œé¢‘ç‡"><span>SQLæ‰§è¡Œé¢‘ç‡</span></a></h4><p>ä»¥æ’å…¥/åˆ é™¤/ä¿®æ”¹/æŸ¥è¯¢ä¸ºä¸»ï¼Ÿ</p><p>å¢åˆ æ”¹æŸ¥çš„è®¿é—®é¢‘æ¬¡ï¼š</p><p><code>SHOW GLOBAL STATUS LIKE &#39;Com_______&#39;;</code></p><blockquote><p>7ä¸ªçŸ­ä¸‹åˆ’çº¿</p></blockquote><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/image-20230104202956896.png" alt="image-20230104202956896"></p><h4 id="æ…¢æŸ¥è¯¢æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#æ…¢æŸ¥è¯¢æ—¥å¿—"><span>æ…¢æŸ¥è¯¢æ—¥å¿—</span></a></h4><p>è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°<code>(long_query_time)</code>çš„æ‰€æœ‰sqlè¯­å¥çš„æ—¥å¿—</p><p>MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤å¼€å¯</p><p>æŸ¥çœ‹æ•°æ®åº“æ…¢æŸ¥è¯¢é…ç½®ï¼š<code>show variables like &#39;slow_query_log&#39;</code></p><p>å¦‚æœæ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶<code>/etc/my.cnf</code>ä¸­ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#å¼€å¯MySQLæ…¢æ—¥å¿—æŸ¥è¯¢å¼€å…³</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">slow_query_log </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#è®¾ç½®æ…¢æŸ¥è¯¢æ—¶é—´ï¼Œé»˜è®¤ä¸º10s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">long_query_time </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#é‡å¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">systemctl </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="show-profiles" tabindex="-1"><a class="header-anchor" href="#show-profiles"><span>Show profiles</span></a></h4><p>åšsqlä¼˜åŒ–æ—¶ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£æ—¶é—´è€—è´¹åˆ°å“ª</p><p>é€šè¿‡<code>SELECT @@have_profiling;</code>çœ‹æ˜¯å¦æ”¯æŒ</p><p>é»˜è®¤æ—¶å…³é—­çš„ï¼Œéœ€è¦<code>SET profiling = 1;</code></p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- ä¸åŒè¯­å¥çš„è€—è´¹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">show profiles;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- æŸ¥è¯¢æŒ‡å®šquery_idçš„SQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">show </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">profile</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> query query_id;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- ä¸åŒè¯­å¥çš„è€—è´¹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">show </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">profile</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cpu </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> query query_id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="explain" tabindex="-1"><a class="header-anchor" href="#explain"><span>explain</span></a></h4><p>ä¸åªæ˜¯çœ‹æ‰§è¡Œæ—¶é—´ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä½•æ‰§è¡ŒSELECTè¯­å¥çš„ä¿¡æ¯</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- åœ¨sqlæŸ¥è¯¢è¯­å¥å‰åŠ ä¸Šå…³é”®å­—explain/desc</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> å­—æ®µåˆ—è¡¨ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> è¡¨å </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> æ¡ä»¶;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ç»“æœ-explainæ‰§è¡Œè®¡åˆ’" tabindex="-1"><a class="header-anchor" href="#ç»“æœ-explainæ‰§è¡Œè®¡åˆ’"><span>ç»“æœï¼šexplainæ‰§è¡Œè®¡åˆ’</span></a></h5><ul><li><p>id ï¼šæŸ¥è¯¢çš„åºåˆ—å·ï¼Œæ‰§è¡Œçš„é¡ºåºæˆ–æ˜¯æ“ä½œè¡¨çš„é¡ºåº</p><p><strong>âš ï¸idè¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œidç›¸åŒåˆ™ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œ</strong></p></li><li><p>Typeï¼šè¿æ¥ç±»å‹ï¼Œæ€§èƒ½æœ‰å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸º NULL, system, const, eq_ref, ref, range, index, all</p><blockquote><p>ä¼˜åŒ–çš„æ—¶å€™ï¼Œå°½é‡å¾€å‰ä¼˜åŒ–</p><p>ä¸è®¿é—®ä»»ä½•è¡¨æ‰æœ‰å¯èƒ½NULL</p><p>indexè¡¨ç¤ºç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯å¯¹ç´¢å¼•å…¨éƒ¨æ‰«æ</p><p>allä»£è¡¨å…¨è¡¨æ‰«æï¼Œæ€§èƒ½ä½</p></blockquote></li><li><p>**Possible_keyï¼š**å¯èƒ½ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•</p></li><li><p>**keyï¼š**å®é™…ç”¨çš„ç´¢å¼•</p></li><li><p>**Key_lenï¼š**ç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œä¸ºç´¢å¼•å­—æ®µçš„æœ€å¤§å¯èƒ½é•¿åº¦ï¼Œä¸æ˜¯å®é™…ä½¿ç”¨é•¿åº¦ï¼›ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½</p></li><li><p>Rowsï¼šæ‰§è¡ŒæŸ¥è¯¢çš„è¡Œæ•°</p><blockquote><p>MySQLè®¤ä¸ºå¿…é¡»è¦æ‰§è¡ŒæŸ¥è¯¢çš„è¡Œæ•°ï¼Œåœ¨innodbå¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸å‡†ç¡®</p></blockquote></li><li><p>Filtersï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œå éœ€è¦è¯»å–è¡Œçš„ç™¾åˆ†æ¯”ï¼Œè¿™ä¸ªæ•°å€¼è¶Šå¤§è¶Šå¥½</p></li><li><p><strong>extra</strong>ï¼šé¢å¤–è¿›è¡Œçš„</p></li><li><p>Select_typeï¼šæŸ¥è¯¢ç±»å‹ï¼ŒSIMPLEã€SUBç­‰</p></li></ul><p>ä¾‹å­ï¼šæŸ¥é€‰ä¿®äº†mysqlè¯¾ç¨‹çš„å­¦ç”Ÿ</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> course c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;MySQL&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> studentid </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student_course sc </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> sc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">couseid</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- studentid</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> student s </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥é€šè¿‡åµŒå¥—åˆå¹¶æˆä¸€æ¡</p><p>åœ¨å‰é¢åŠ  <code>explain</code></p>`,28)]))}const r=s(l,[["render",t]]),d=JSON.parse(`{"path":"/cs/database/mysql/%F0%9F%93%93%203%20%E7%B4%A2%E5%BC%95/2.%E6%80%A7%E8%83%BD.html","title":"æ€§èƒ½åˆ†æ","lang":"en-US","frontmatter":{"description":"æ€§èƒ½åˆ†æ ä¸»è¦æ˜¯ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼ˆä¸»è¦æ˜¯ç´¢å¼•çš„ä¼˜åŒ–ï¼‰ SQLæ‰§è¡Œé¢‘ç‡ ä»¥æ’å…¥/åˆ é™¤/ä¿®æ”¹/æŸ¥è¯¢ä¸ºä¸»ï¼Ÿ å¢åˆ æ”¹æŸ¥çš„è®¿é—®é¢‘æ¬¡ï¼š SHOW GLOBAL STATUS LIKE 'Com_______'; 7ä¸ªçŸ­ä¸‹åˆ’çº¿ image-20230104202956896 æ…¢æŸ¥è¯¢æ—¥å¿— è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°(long_query_time)çš„æ‰€æœ‰sqlè¯­å¥çš„æ—¥å¿—...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"æ€§èƒ½åˆ†æ\\",\\"image\\":[\\"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/image-20230104202956896.png\\"],\\"dateModified\\":\\"2023-04-26T09:43:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aubrey\\",\\"url\\":\\"https://github.com/aubreykuang\\"}]}"],["meta",{"property":"og:url","content":"https://aubreykuang.github.io/blog/blog/cs/database/mysql/%F0%9F%93%93%203%20%E7%B4%A2%E5%BC%95/2.%E6%80%A7%E8%83%BD.html"}],["meta",{"property":"og:site_name","content":"Aubrey's Blog"}],["meta",{"property":"og:title","content":"æ€§èƒ½åˆ†æ"}],["meta",{"property":"og:description","content":"æ€§èƒ½åˆ†æ ä¸»è¦æ˜¯ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼ˆä¸»è¦æ˜¯ç´¢å¼•çš„ä¼˜åŒ–ï¼‰ SQLæ‰§è¡Œé¢‘ç‡ ä»¥æ’å…¥/åˆ é™¤/ä¿®æ”¹/æŸ¥è¯¢ä¸ºä¸»ï¼Ÿ å¢åˆ æ”¹æŸ¥çš„è®¿é—®é¢‘æ¬¡ï¼š SHOW GLOBAL STATUS LIKE 'Com_______'; 7ä¸ªçŸ­ä¸‹åˆ’çº¿ image-20230104202956896 æ…¢æŸ¥è¯¢æ—¥å¿— è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°(long_query_time)çš„æ‰€æœ‰sqlè¯­å¥çš„æ—¥å¿—..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/image-20230104202956896.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-04-26T09:43:18.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-26T09:43:18.000Z"}]]},"git":{"createdTime":1672889300000,"updatedTime":1682502198000,"contributors":[{"name":"KoryKL","username":"KoryKL","email":"1274994508@qq.com","commits":3,"url":"https://github.com/KoryKL"}]},"readingTime":{"minutes":2.08,"words":625},"filePathRelative":"cs/database/mysql/ğŸ““ 3 ç´¢å¼•/2.æ€§èƒ½.md","excerpt":"\\n<p>ä¸»è¦æ˜¯ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ï¼ˆä¸»è¦æ˜¯ç´¢å¼•çš„ä¼˜åŒ–ï¼‰</p>\\n<h4>SQLæ‰§è¡Œé¢‘ç‡</h4>\\n<p>ä»¥æ’å…¥/åˆ é™¤/ä¿®æ”¹/æŸ¥è¯¢ä¸ºä¸»ï¼Ÿ</p>\\n<p>å¢åˆ æ”¹æŸ¥çš„è®¿é—®é¢‘æ¬¡ï¼š</p>\\n<p><code>SHOW GLOBAL STATUS LIKE 'Com_______';</code></p>\\n<blockquote>\\n<p>7ä¸ªçŸ­ä¸‹åˆ’çº¿</p>\\n</blockquote>\\n<p><img src=\\"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/image-20230104202956896.png\\" alt=\\"image-20230104202956896\\"></p>","autoDesc":true}`);export{r as comp,d as data};
